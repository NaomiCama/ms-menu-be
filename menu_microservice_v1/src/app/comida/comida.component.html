<div class="container mt-4">
  <div class="row">
    <!-- Nueva Comida -->
<div class="col-lg-4 mb-4" style="margin-left: -250px;">
  <div class="card">
    <div class="card-body">
      <h3 class="card-title">{{ editandoId !== null ? 'Editar Comida' : 'Nueva Comida' }}</h3>
      <form (submit)="guardarEdicion()" #comidaForm="ngForm">
        
        <!-- Para el campo de Nombre -->
<div class="form-group">
  <label for="nombre" class="lead">Nombre:</label>
  <input type="text" class="form-control" id="nombre" [(ngModel)]="nuevaComida.nombrec" name="nombre" required
         pattern="^[A-Za-z\s]+$" (keypress)="validarLetras($event)">
  <div *ngIf="comidaForm.controls['nombre']?.hasError('pattern')">
    Solo se permiten letras en el nombre.
  </div>
</div>


<!-- Para el campo de Categoría -->
<div class="form-group">
  <label for="categoria" class="lead">Categoría:</label>
  <select class="form-control" id="categoria" [(ngModel)]="nuevaComida.categoria" name="categoria" required>
    <option value="">Seleccionar</option>
    <option value="Entrada">Entrada</option>
    <option value="Fondo">Fondo</option>
    <option value="Refresco">Refresco</option>
    <option value="Postre">Postre</option>
  </select>
</div>


        <button type="submit" class="btn btn-primary">{{ editandoId !== null ? 'Guardar Cambios' : 'Crear Nueva' }}</button>
      </form>
    </div>
  </div>
</div>

    <!-- Listado de Comidas -->
    <div class="col">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Listado de Comidas - {{ filtroEstado === 'A' ? 'Activos' : 'Inactivos' }}</h3>
          
          <div class="mb-3">
            <label for="filtroEstado">Filtrar por Estado:</label>
            <select id="filtroEstado" [(ngModel)]="filtroEstado" (change)="cambiarFiltroEstado()">
              <option value="A">Activos</option>
              <option value="I">Inactivos</option>
            </select>
          </div>

          <div class="table-responsive">
            <table class="table table-bordered table-striped">
              <thead class="thead-dark">
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Categoría</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                <!--   <th>Restaurar</th>
                  <th>Editar</th> -->
                </tr>
              </thead>
              <tbody>
                <!-- <tr *ngFor="let comida of comidas"> -->
                  <tr *ngFor="let comida of comidas">
                    <td>{{ comida.idcomida }}</td>
                    <td>{{ comida.nombrec }}</td>
                    <td>{{ comida.categoria | slice:0:15 }}</td>
                    <td>
                      <span [ngClass]="{'': comida.estado === 'A', 'badge badge-danger': comida.estado === 'I'}">
                        {{ comida.estado === 'A' ? 'Activo' : 'Inactivo' }}
                      </span>
                    </td>

                   <td>
                    <button *ngIf="mostrarBoton(comida.estado) && filtroEstado === 'A'" class="btn btn-danger btn-sm" (click)="eliminarComida(comida.idcomida)">Eliminar</button>
                    <button *ngIf="mostrarBoton(comida.estado) && filtroEstado === 'A'" class="btn btn-primary btn-sm" (click)="editarComida(comida.idcomida)">Editar</button>
                    <button *ngIf="mostrarBoton(comida.estado) && filtroEstado === 'I'" class="btn btn-success btn-sm" (click)="restaurarComida(comida.idcomida)">Restaurar</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
